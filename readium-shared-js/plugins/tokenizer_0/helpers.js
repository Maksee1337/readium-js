define(function() {    return {        divideSpanListOnPartsBy3000Bytes: function (spans) {            const encoder = new TextEncoder();            const template = () => {                return {spans: [], length: 0, text: ''}            };            const result = [template()];            let i = 0;            let offset = 0;            spans.forEach((e) => {                const len = encoder.encode(e.innerText).length;                if (result[i].length + len >= 1000000) {                    result.push(template());                    i++;                }                result[i].spans.push(e);                result[i].length += len;                result[i].text += (`${e.innerText} `);            })            return result;        },        getIdFromPosition: function (start, end) {            return `w${start}x${end}`;        },        getPositionFromId: function (id) {            const res = id.substring(1).split('x');            return {start: res[0], end: res[1]}        }    };});